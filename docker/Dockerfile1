#FROM registry.devzone.net/mygarage/mygarage-php:7.2-fpm-alpine-dev
#FROM php:7.2.14-fpm-alpine3.8
FROM php:7.2.14-fpm
RUN apt-get update && \
    apt-get install -y \
        zlib1g-dev
ENV LIBRARY_PATH=/lib:/usr/lib
RUN docker-php-ext-install zip



RUN apt-get update
RUN apt-get install libldap2-dev -y
RUN rm -rf /var/lib/apt/lists/*
RUN docker-php-ext-configure ldap --with-libdir=lib/x86_64-linux-gnu/
RUN docker-php-ext-install ldap



RUN apt-get update \
    && apt-get install -y git
#
RUN set -xe \
#    && apk add --no-cache git \
#    # Install Composer
    && curl --silent --show-error https://getcomposer.org/installer | php \
    && mv composer.phar /usr/local/bin/composer \
#    # Install Xdebug
    && docker-php-source extract \
    && git clone --branch xdebug_2_6 https://github.com/xdebug/xdebug.git /usr/src/php/ext/xdebug/ \
    && docker-php-ext-configure xdebug \
    && docker-php-ext-install xdebug \
    && docker-php-source delete \
    # Clear cache
    && rm -rf /tmp/* /var/cache/apk/*
